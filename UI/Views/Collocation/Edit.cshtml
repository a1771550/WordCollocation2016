@using BLL.Abstract
@model UI.Models.ViewModels.CollocationViewModel

@{
	long collocationId = ViewBag.CollocationId ?? Model.Collocation.Id;
	ViewBag.Title = collocationId == 0 ? THResources.Resources.Add : THResources.Resources.Edit;
	string title = ViewBag.Title + "--" + ModelType.Collocation.ToString();
	//string action = User.IsInRole("Admin") ? "IndexForAdmin" : "IndexForEditor";
}

<div class="span4">
	<span class="h3 blue">@title</span>

	@if (ViewBag.ErrorMessage != null)
	{
		<p class="alert">ErrorMessage: @ViewBag.ErrorMessage</p>
	}
	@if (ViewBag.InnerMessage != null)
	{
		<p class="alert">ErrorMessage: @ViewBag.InnerMessage</p>
	}

	@if (ViewBag.IsDuplicatedEntry != null)
	{
		<p class="alert">ErrorMessage: @THResources.Resources.DuplicatedEntry</p>
	}
</div>

@using (Html.BeginForm("Edit", "Collocation", FormMethod.Post, new { @class = "collocation-form" }))
{
	@Html.AntiForgeryToken()
	@Html.Hidden("collocationId", collocationId)


	@Html.ValidationSummary("", new { @class = "text-danger" })

	<fieldset class="span3">
		<div class="form-group">
			@Html.LabelFor(model => model.Pos, new {@class = ""})
			<div class="">
				@Html.DropDownList("posId", Model.PosDropDownList)
			</div>
		</div>

		<div class="form-group">
			@Html.LabelFor(model => model.ColPos, new {@class = ""})
			<div class="">
				@Html.DropDownList("colPosId", Model.ColPosDropDownList)

			</div>
		</div>

		<div class="form-group">
			@Html.LabelFor(model => model.Word, new {@class = ""})
			<div class="">
				@Html.DropDownList("wordId", Model.WordDropDownList)

			</div>
		</div>

		<div class="form-group">
			@Html.LabelFor(model => model.ColWord, new {@class = ""})
			<div class="">
				@Html.DropDownList("colWordId", Model.ColWordDropDownList)

			</div>
		</div>

		<div class="form-group">
			@Html.LabelFor(model => model.CollocationPattern, new {@class = ""})
			<div class="">
				@Html.DropDownList("pattern", Model.CollocationPatternDropDownList)

			</div>
		</div>

		<div class="form-group">
			<div class="">
				<button type="submit">@ViewBag.Title</button>

			</div>
		</div>

		<div>
			@Html.ActionLink("Back to List", "Index")
		</div>
	</fieldset>
}


@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
	<script>
		(function ($)
		{
			$("select:first").focus();
		})(jQuery);
	</script>
}
