function MaskedPassword(n,t,i){var r;if(typeof document.getElementById=="undefined"||typeof document.styleSheets=="undefined"||n==null)return!1;this.symbol=t;this.isIE=typeof document.uniqueID!="undefined";n.value=i;n.defaultValue=i;n._contextwrapper=this.createContextWrapper(n);this.fullmask=!1;var u=n._contextwrapper,f='<input type="hidden" name="'+n.name+'">',e=this.convertPasswordFieldHTML(n);return u.innerHTML=f+e,n=u.lastChild,n.className+=" masked",n.setAttribute("autocomplete","off"),n._realfield=u.firstChild,n._contextwrapper=u,this.limitCaretPosition(n),r=this,this.addListener(n,"change",function(n){r.fullmask=!1;r.doPasswordMasking(r.getTarget(n))}),this.addListener(n,"input",function(n){r.fullmask=!1;r.doPasswordMasking(r.getTarget(n))}),this.addListener(n,"propertychange",function(n){r.doPasswordMasking(r.getTarget(n))}),this.addListener(n,"keyup",function(n){/^(9|1[678]|224|3[789]|40)$/.test(n.keyCode.toString())||(r.fullmask=!1,r.doPasswordMasking(r.getTarget(n)))}),this.addListener(n,"blur",function(n){r.fullmask=!0;r.doPasswordMasking(r.getTarget(n))}),this.forceFormReset(n),!0}MaskedPassword.prototype={doPasswordMasking:function(n){var i="",t,r;if(n._realfield.value!="")for(t=0;t<n.value.length;t++)i+=n.value.charAt(t)==this.symbol?n._realfield.value.charAt(t):n.value.charAt(t);else i=n.value;r=this.encodeMaskedPassword(i,this.fullmask,n);(n._realfield.value!=i||n.value!=r)&&(n._realfield.value=i,n.value=r)},encodeMaskedPassword:function(n,t){for(var u=t===!0?0:1,r="",i=0;i<n.length;i++)r+=i<n.length-u?this.symbol:n.charAt(i);return r},createContextWrapper:function(n){var t=document.createElement("span");return t.style.position="relative",n.parentNode.insertBefore(t,n),t.appendChild(n),t},forceFormReset:function(n){while(n){if(/form/i.test(n.nodeName))break;n=n.parentNode}return/form/i.test(n.nodeName)?(this.addSpecialLoadListener(function(){n.reset()}),n):null},convertPasswordFieldHTML:function(n){for(var r="<input",i=n.attributes,t=0;t<i.length;t++)i[t].specified&&!/^(_|type|name)/.test(i[t].name)&&(r+=" "+i[t].name+'="'+i[t].value+'"');return r+' type="text" autocomplete="off">'},limitCaretPosition:function(n){var t=null,i=function(){t==null&&(t=this.isIE?window.setInterval(function(){var t=n.createTextRange(),i=n.value.length,r="character";t.moveEnd(r,i);t.moveStart(r,i);t.select()},100):window.setInterval(function(){var t=n.value.length;n.selectionEnd==t&&n.selectionStart<=t||(n.selectionStart=t,n.selectionEnd=t)},100))},r=function(){window.clearInterval(t);t=null};this.addListener(n,"focus",function(){i()});this.addListener(n,"blur",function(){r()})},addListener:function(n,t,i){return typeof document.addEventListener!="undefined"?n.addEventListener(t,i,!1):typeof document.attachEvent!="undefined"?n.attachEvent("on"+t,i):void 0},addSpecialLoadListener:function(n){return this.isIE?window.attachEvent("onload",n):document.addEventListener("DOMContentLoaded",n,!1)},getTarget:function(n){return n?n.target?n.target:n.srcElement:null}};