<!DOCTYPE html>
<html>
<head>
	<title>Check Email Format Demo</title>
	<link href="Content/wisewords/bootstrap.css" rel="stylesheet" />
	<link href="Content/wisewords/glyphicons.css" rel="stylesheet"/>
	<style>
		/*#iOk {
			display: inline-block;
			vertical-align: middle;			
		}*/
	</style>

</head>
<body>
	<form action="#" id="frmDemo">
		Email: <input type="text" id="Email" name="Email" placeholder="Email"/>&nbsp;<img src="Images/ok.png" id="iOk" style="vertical-align: text-bottom; width: .95em; height: .95em;"/>
		<br /><br />
		<button type="submit" id="submit">Submit</button>
	</form>

<script src="Scripts/jquery-2.1.3.js"></script>
<script src="Scripts/checkEmail.js"></script>
<script>
	window.isEmailTaken = false;
	$(function () {
		$('#iOk').hide();
		$('#Email').bind('keyup paste change', function(e) {
			if (checkEmailFormat('Email'))
			{
				console.log('email OK');
				$('#iOk').show();
				$('#frmDemo').submit();
			} else console.log('email error!');
		});

		$('#submit').click(function(e) {
			e.preventDefault();

			/*var isTaken = checkEmailTaken('Email');
			console.log('isTaken: ' + isTaken);*/

			checkEmailTaken('Email');

			console.log('isEmailTaken: ' + window.isEmailTaken);
			

			if (checkEmailFormat('Email'))
			{
				console.log('email OK');
				$('#iOk').show();
				$('#frmDemo').submit();
			} else console.log('email error!');
		});
	});

</script>
</body>
</html>
